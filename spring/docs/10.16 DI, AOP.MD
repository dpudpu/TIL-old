
1. 생성까지는 Bean컨테이너  
2. 인스턴스를 넣어주는 부분은 DI 컨테이너
3. 자동으로 트랜잭션 코드는 AOP



객체를 자바소스코드없이 메모리에 생성할 수 있는 방법이 있다.
보통 이런걸 Proxy라 하고 스프링이 만들어줌.

1. config에서 bean을 생성해서 메모리에 올리고 주입해주고
2. 이용하는 관점

 *DI(Dependency Injection)*
===========
DI는 클래스 사이의 의존 관계를 빈설정 정보를 바탕으로 컨테이너가 자동으로 연결해주는 것을 말한다.  

의존 객체를 직접 생성하는 방식의 단점
-
- 유지보수시에 코드를 변경할 때 일일이 변경해줘야야 하는 코드가 많아진다. ex) A a = new AB() -> A a = new AC()  이런 코드가 여러개면 일일이 다 바꿔줘야함.
- 개발 효율을 낮춘다. -> A메소드 미구현시 A메소드가 필요한 의존하는 다른 클래스를 테스트할 수 없음.

#### 의존을 외부에서 할 경우
- 유지보수시 ( A a = new AB() -> A a = new AC() )를 조립기(객체를 생성하고 객체들을 서로 연결)에서만 변경해주면된다.  
- 메소드를 재정의한 가짜 객체로 의존하는 다른 클래스에서 테스트가 가능.  
 ( Cook cook = new Cook(){
                                                                     @Override
                                                                     public void Oven(){ ~~~~ }} )



DI 컨테이너에서 인스턴스를 관리할 때의 장점
---
* 인스턴스의 스코프 제어 가능(singletone, prototype)
* 인스턴스의 생명 주기 제어
* AOP 방식으로 공통 기능을 집어 넣을 수 있다.
* 의존하는 컴포넌트 간의 결합도를 낮춰서 단위 테스트를 쉽게 만든다.

--------

*AOP(Aspect Oriented Programming)*
===


어플리케이션은 다양한 공통 기능을 필요로 한다. 로깅과 같은 기본적인 기능에서부터 트랜잭션이나 보안과 같은 기능에 이르기까지 공통 기능이 존재한다.
이런 공통 기능들은 어플리케이션의 핵심 비즈니스 로직과는 구분되는 기능이다. 핵심 비즈니스 기능과 구분하기 위해
공통기능을 공통 관심 사항(cross cutting concern)이라고 표현하며, 핵심 로직을 핵심 관심사항(core concern)이라고 표현한다.
객체 지향 기법을 사용해서 여러 모듈에 효과적으로 적용하는데가 한계가 있어서 중복된 코드를 양산하곤 한다.
이런 한계를 극복하기 위해서 AOP라는 기법을 사용.

AOP 용어
--
- Joinpoin - Advice를 적용 가능한 지점. 메서드 호출, 필드 값 변경 등이 Joinpoint에 해당한다.  
- Pointcut - Joinpoint의 부분 집합으로서 실제로 Advice가 적용되는 Joinpoint를 나타낸다.  
             스프링에서는 정규 표현식이나 AspectJ의 문법을 이용하여 Pointcut을 정의 할 수 있다.  
- Advice   - 언제 공통 관심 기능을 핵심 로직에 적용할 지를 정의하고 있다.  
            ex) '메서드를 호출하기 전'(언제)에 '트랜잭션 시작'(공통 기능) 기능을 적용한다는 것을 정의하고 있다.  
- Weaving  - ADvice를 핵심 로직 코드에 적용하는 것을 weaving이라고 한다.  
- Aspect   - 여러 객체에 공통으로 적용되는 기능을 Aspect라고 한다. 트랜잭션이나 보안 등이 ASpect의 좋은 에이다.  

스프링에서의 AOP
--
스프링은 자체적으로 프록시 기반의 AOP를 지원하고 있다. 따라서, 스프링 AOP는 메서드 호출 Joinpoint만을 지원한다.
 -> 프록시 기반에서는 메서드가 호출될 때에만 Advice를 적용할 수 있기 때문에 필드 값 변경과 같은 Joinpoint에 대해서는 적용할 수 없는 한계가 있다.

 스프링은 자바 리플렉션 API가 제공하는 java.lang.reflect.Proxy를 이용하여 프록시 객체를 생성한다.
 인터페이스를 기반으로 프록시 객체를 생성하기 때문에 인터페이스에 정의되어 있지 않은 메서드에 대해서는 AOP가 적용되지않는 점에 유의해야 한다.

Advcie 종류
--
Before, After Returning, After Throwing, After, Around
 범용적으로 사용되는 것은 Around Advice인데, 그 이유는 대상 객체의 메서드를 실행하기 전/후에 원하는 기능을 삽입할 수 있기 때문이다.
 이런 이유로 캐시 기능, 성능 모니터링과 같은 Aspect를 구현할 때에는 Around Advice를 주로 이용.
