#### 출처 : 자바 ORM표준 JPA 프로그래밍 저자: 김영한

## 자연키와 대리키

비즈니스 요구사항은 계속해서 변하는데 테이블은 한 번 정의하면 변경하기 어렵다. 

비즈니스와 무관하여 외부 풍파에 쉽게 흔들리지 않는 대리키가 일반적으로 좋은 선택이라 생각한다.

- 주민번호 (정책 변경으로 주민등록번호를 저장할 수 없게 되는 문제 발생)
- 전화번호 (번호가 없거나 바뀔 수 있다.)
- 복합 키 (복잡하다. - 식별자 클래스 필요하고 그 외에도 사용해야 하는 것들이 많다.)

##### 비슷한 경우로 식별 관계와 비식별 관계가 있다. 

다대다 관계를 일대다 다대일 관계로 풀어내기 위해 연결 테이블을 만들 때 식별자를 어떻게 구성할지 선택해야 한다. 

- 식별 관계 : 받아온 식별자를 기본키 + 외래키로 사용한다.

- 비식별 관계 : 받아온 식별자는 외래키로만 사용하고 새로운 식별자를 추가한다. (추천)



​    

## @Enumerated

자바의 enum 타입을 매핑할 때 사용한다. 

- EnumType.ORDINAL - enum 순서를 데이터베이스에 저장
  - 장점: 데이터베이스에 저장되는 크기가 작다.
  - 단점: 이미 저장된 enum의 순서를 변경할 수 없다.
- EnumType.STRING - enum 이름을 데이터베이스에 저장 (권장)
  - 장점: 저장된 enum의 순서가 바뀌거나 enum이 추가되어도 안전하다.
  - 단점: 데이터베이스에 저장되는 데이터 크기가 ORDINAL에 비해서 크다.



